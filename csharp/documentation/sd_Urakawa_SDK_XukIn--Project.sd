#!>>
#!This UML Sequence Diagram
#!describes the actions required
#!to read a simple XUK file with
#!the C# implementation of the
#!Urakawa SDK.
#!(see the XukAble interface
#! and the XukIn method).
#!<<

#![sd Urakawa SDK: XukIn in C#]

main:Actor[r] "XUK parser example"
/project:Project[a]
/xmlReader:XmlReader
/datamodelFactory:DataModelFactory
/presentation1:Presentation
xmlInstance:XML[a][p][r]


*11 xmlInstance
<Xuk>
  <Project>
    <mPresentations>
      <Presentation> 
       <mMetadata>
         ...
       </mMetadata>
      </Presentation>
      <Presentation>
        ...
      </Presentation>
    </mPresentations>
  </Project>
</Xuk>
*11

main:project.new
project:datamodelFactory.new
main:project.OpenXuk(URL)

*1 xmlReader
XmlReader is the
XML cursor API
from C#.NET
(System.xml)
*1
(1)project:xmlReader.new
*111 xmlReader
XML cursor:
just before the root element
*111
project:project.OpenXuk(xmlReader)
project:xmlReader.ReadToFollowing("Xuk")
*111 xmlReader
XML start_element:
"xuk"
*111
project:xmlReader.Read()
*111 xmlReader
XML start_element:
"Project"
*111
project:project.XukIn(xmlReader)::XukAble
project:project.Clear()::XukAble
*111 project
mPresentations.Clear()
*111
project[1]:project.XukInAttributes(xmlReader) @virtual
*111 project
Actually does nothing here, but
subclasses of Project can override this
method when XML attributes need
to be parsed for the "Project" element.
*111
project[1]:xmlReader.Read()
*111 xmlReader
XML start_element:
"mPresentations"
*111
project:project.XukInChild(xmlReader) @virtual
*111 project
Subclasses of Project can override
this method to parse other children
in addition to the "mPresentations" element.
*111
project:project.XukInPresentations(xmlReader)
project:xmlReader.Read()
*111 xmlReader
XML start_element:
"Presentation" #1
*111
project:presentation1=datamodelFactory.CreatePresentation([currentQName])
datamodelFactory:presentation1.new
project:project.addPresentation(presentation1)
project[1]:presentation1.XukIn(xmlReader)
presentation1:presentation1.Clear()::XukAble
*111 presentation1
mTreeNodeFactory = null;
mPropertyFactory = null;
mChannelFactory = null;
mChannelsManager = null;
mMediaFactory = null;
mMediaDataManager = null;
mMediaDataFactory = null;
mDataProviderManager = null;
mDataProviderFactory = null;
mUndoRedoManager = null;
mCommandFactory = null;
mRootNode = null;
mRootNodeInitialized = false;
mRootUri = null;
mLanguage = null;
mMetadata.Clear();
*111
presentation1:presentation1.XukInAttributes(xmlReader) @virtual

presentation1:uri=xmlReader.GetAttribute("rootUri")
presentation1:presentation1.setUri(uri)


presentation1:lang=xmlReader.GetAttribute("lang")
presentation1:presentation1.setLanguage(lang)

presentation1:xmlReader.Read()
*111 xmlReader
XML start_element:
"mMetadata"
*111

project[4]:xmlReader.destroy
main:project.destroy
project:datamodelFactory.destroy
